<!DOCTYPE html>
<html lang="ru" data-theme="dark">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <title>PULSE X</title>
    
    <!-- –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ —Å—Ç–∏–ª–µ–π -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Manrope:wght@300;400;500;600;700;800&subset=cyrillic&display=swap" rel="stylesheet">
    
    <!-- –ù–∞—à —Ñ–∞–π–ª —Å—Ç–∏–ª–µ–π -->
    <link rel="stylesheet" href="style.css">

    <!-- –ë–∏–±–ª–∏–æ—Ç–µ–∫–∏ -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.29.4/moment.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.29.4/locale/ru.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>
    <script src="https://unpkg.com/@vkontakte/vk-bridge/dist/browser.min.js"></script>
</head>
<body>

<!-- LIGHTBOX -->
<div id="lightbox" class="lightbox">
    <div class="lightbox-close" onclick="closeLightbox()"><i class="fas fa-times"></i></div>
    <img id="lightboxImg" class="lightbox-img">
</div>

<!-- LOADER -->
<div id="loading" style="position:fixed; inset:0; background:var(--bg-body); z-index:9999; display:flex; align-items:center; justify-content:center; flex-direction:column; transition:0.5s;">
    <div class="pulse-loader">PULSE</div>
    <div class="text-muted mt-2 small">–ó–∞–≥—Ä—É–∑–∫–∞...</div>
</div>

<!-- ALERT -->
<div id="modalAlert" class="modal-confirm">
    <div class="modal-confirm-bg" onclick="closeCustomModal()"></div>
    <div class="modal-confirm-box">
        <h4 id="alertTitle" class="fw-bold mb-2">–í–Ω–∏–º–∞–Ω–∏–µ</h4>
        <p id="alertMsg" class="text-muted mb-4">–¢–µ–∫—Å—Ç —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è</p>
        <div class="d-flex gap-2 justify-content-center" id="alertBtns"></div>
    </div>
</div>

<!-- SPECIAL ADMIN INFO MODAL -->
<div id="modalAdminInfo" class="modal-confirm">
    <div class="modal-confirm-bg" onclick="document.getElementById('modalAdminInfo').classList.remove('active')"></div>
    <div class="modal-confirm-box" style="border: 1px solid #e31e24; box-shadow: 0 0 30px rgba(227, 30, 36, 0.2);">
        <div style="width:60px; height:60px; margin:0 auto 15px; background: linear-gradient(135deg, #b91d47, #e31e24); border-radius:50%; display:flex; align-items:center; justify-content:center; box-shadow: 0 5px 15px rgba(227, 30, 36, 0.5);">
            <i class="fas fa-shield-alt text-white fa-2x"></i>
        </div>
        <h4 class="fw-bold mb-1">–ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä</h4>
        <div class="text-danger fw-bold small mb-3">–û–§–ò–¶–ò–ê–õ–¨–ù–´–ô –°–¢–ê–¢–£–°</div>
        <p class="text-muted small mb-4">
            –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —è–≤–ª—è–µ—Ç—Å—è –æ—Ñ–∏—Ü–∏–∞–ª—å–Ω—ã–º –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–æ–º –∏ —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–æ–º PULSE X. –î–µ–π—Å—Ç–≤–∏—è —ç—Ç–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω—ã —Å–∏—Å—Ç–µ–º–æ–π –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏.
        </p>
        <button class="btn btn-danger w-100 rounded-pill fw-bold" onclick="document.getElementById('modalAdminInfo').classList.remove('active')">–ü–æ–Ω—è—Ç–Ω–æ</button>
    </div>
</div>

<!-- AUTH SCREENS -->
<div id="regScreen" class="auth-screen">
    <h1 class="brand" style="font-size:40px; margin-bottom:10px;">PULSE X</h1>
    <p class="text-muted text-center mb-4">–°–æ–∑–¥–∞–π —Å–≤–æ–π —Å—Ç–∏–ª—å</p>
    <div onclick="document.getElementById('regFile').click()" class="position-relative clickable mb-4">
        <img id="regPrev" style="width:120px; height:120px; border-radius:50%; object-fit:cover; display:none; border:4px solid var(--bg-card);">
        <div id="regIcon" style="width:120px; height:120px; border-radius:50%; background:var(--bg-input); border:2px dashed var(--text-muted); display:flex; align-items:center; justify-content:center;">
            <i class="fas fa-camera fa-2x text-muted"></i>
        </div>
    </div>
    <input type="file" id="regFile" hidden accept="image/*" onchange="handleRegFile(this)">
    <input type="text" id="regName" class="inp" placeholder="–ù–∏–∫–Ω–µ–π–º">
    <input type="password" id="regPass" class="inp" placeholder="–ü–∞—Ä–æ–ª—å">
    <button class="btn-main mt-2" onclick="register()">–°–æ–∑–¥–∞—Ç—å –ø—Ä–æ—Ñ–∏–ª—å</button>
    <div class="mt-4 text-primary clickable small fw-bold" onclick="toggleAuthScreen('login')">–í–æ–π—Ç–∏ –≤ –∞–∫–∫–∞—É–Ω—Ç</div>
</div>

<div id="fullLoginScreen" class="auth-screen">
    <h1 class="brand" style="font-size:40px; margin-bottom:10px;">PULSE X</h1>
    <p class="text-muted text-center mb-4">–° –≤–æ–∑–≤—Ä–∞—â–µ–Ω–∏–µ–º</p>
    <input type="text" id="flName" class="inp" placeholder="–ù–∏–∫–Ω–µ–π–º">
    <input type="password" id="flPass" class="inp" placeholder="–ü–∞—Ä–æ–ª—å">
    <button class="btn-main mt-2" onclick="loginWithCredentials()">–í–æ–π—Ç–∏</button>
    <div class="mt-4 text-primary clickable small fw-bold" onclick="toggleAuthScreen('reg')">–ù–µ—Ç –∞–∫–∫–∞—É–Ω—Ç–∞?</div>
</div>

<div id="loginScreen" class="auth-screen">
    <img id="loginAva" src="" style="width:120px; height:120px; border-radius:50%; object-fit:cover; margin-bottom:20px; border:4px solid var(--bg-card); box-shadow:0 10px 30px rgba(0,0,0,0.5);">
    <h3 class="fw-bold mb-1" id="loginName">User</h3>
    <p class="text-muted mb-4 small">–í–≤–µ–¥–∏—Ç–µ –ø–∞—Ä–æ–ª—å –¥–ª—è –≤—Ö–æ–¥–∞</p>
    <input type="password" id="loginPass" class="inp" placeholder="–ü–∞—Ä–æ–ª—å">
    <button class="btn-main mt-3" onclick="performLogin()">–í–æ–π—Ç–∏</button>
    <div class="mt-4 text-danger clickable small" onclick="resetLocalData()">–°–º–µ–Ω–∏—Ç—å –∞–∫–∫–∞—É–Ω—Ç</div>
</div>

<!-- HEADER -->
<div class="app-header">
    <div class="brand">PULSE</div>
    <div class="header-actions">
        <a href="market.html" class="icon-btn text-decoration-none" title="–†—ã–Ω–æ–∫"><i class="fas fa-shopping-basket text-success" style="font-size: 20px;"></i></a>
        <a href="game.html" class="icon-btn text-decoration-none" title="–ò–≥—Ä—ã"><i class="fas fa-ghost text-accent" style="font-size: 22px;"></i></a>
       <a href="chat.html" class="icon-btn text-decoration-none" title="–°–æ–æ–±—â–µ–Ω–∏—è"><i class="fas fa-paper-plane text-primary" style="font-size: 20px;"></i></a>
        <div class="coins-pill clickable" onclick="nav('shop')"><i class="fas fa-coins"></i> <span id="headCoins">0</span></div>
        <div class="icon-btn clickable" onclick="openNotifs()"><i class="fas fa-bell"></i><div class="notif-badge" id="notifBadge"></div></div>
    </div>
</div>

<!-- FEED -->
<div id="view-feed" class="view-section active">
    <div class="new-post-card" onclick="openCreate()">
        <img id="myMiniAva" src="" class="post-ava" style="width:36px;height:36px;">
        <div class="new-post-input">–ß—Ç–æ —É –≤–∞—Å –Ω–æ–≤–æ–≥–æ?</div>
        <div class="new-post-icon"><i class="fas fa-image text-muted"></i></div>
    </div>
    <div id="feedList" style="padding-top:0"></div>
    <div id="feedLoading" class="text-center py-4 text-muted small" style="display:none">–ë–æ–ª—å—à–µ –ø–æ—Å—Ç–æ–≤ –Ω–µ—Ç</div>
</div>

<!-- SHOP -->
<div id="view-shop" class="view-section">
    <div class="p-3 pb-2">
        <h2 class="fw-bold mb-1">–ú–∞–≥–∞–∑–∏–Ω</h2>
        <p class="text-muted small">–ü–æ–∫—É–ø–∞–π —É–Ω–∏–∫–∞–ª—å–Ω—ã–π —Å—Ç–∏–ª—å</p>
    </div>
    <div class="shop-tabs" id="shopTabsContainer">
        <div class="shop-tab active" onclick="switchShopTab('all', this)">–í—Å–µ</div>
        <div class="shop-tab" onclick="switchShopTab('name', this)">–ù–∏–∫–∏</div>
        <div class="shop-tab" onclick="switchShopTab('frame', this)">–£–∫—Ä–∞—à–µ–Ω–∏—è</div>
        <div class="shop-tab" onclick="switchShopTab('cover', this)">–û–±–ª–æ–∂–∫–∏</div>
        <div class="shop-tab" onclick="switchShopTab('profile_bg', this)">–¢–µ–º—ã</div>
        <div class="shop-tab" onclick="switchShopTab('post_bg', this)">–§–æ–Ω—ã –ø–æ—Å—Ç–æ–≤</div>
        <div class="shop-tab" onclick="switchShopTab('badge', this)">–ó–Ω–∞—á–∫–∏</div>
    </div>
    <div class="shop-grid" id="shopList"></div>
</div>

<!-- MY PROFILE -->
<div id="view-profile" class="view-section">
    <div id="myProfileThemeLayer" class="profile-theme-layer"></div>
    <div class="profile-cover" id="myProfileCover"></div>
    <div class="tt-header" id="myProfileHeader">
        <div class="tt-ava-container">
            <img src="" id="myAva" class="tt-ava">
            <!-- –ú–µ—Å—Ç–æ –¥–ª—è –ø–æ–¥–∞—Ä–∫–∞ -->
            <div id="myGiftBadgeContainer"></div>
        </div>
        <div class="tt-name"><span id="myName">...</span></div>
        <div class="tt-username" id="myUsername">@username</div> 
        <div class="tt-stats">
            <div class="tt-stat-item" onclick="openFollowList('following', 'me')"><span class="tt-stat-val" id="myFollowing">0</span><span class="tt-stat-lbl">–ü–æ–¥–ø–∏—Å–∫–∏</span></div>
            <div class="tt-stat-item" onclick="openFollowList('followers', 'me')"><span class="tt-stat-val" id="mySubs">0</span><span class="tt-stat-lbl">–§–∞–Ω–∞—Ç—ã</span></div>
            <div class="tt-stat-item"><span class="tt-stat-val" id="myLvl">0</span><span class="tt-stat-lbl">–õ–∞–π–∫–∏</span></div>
        </div>
        <div class="tt-actions">
            <button class="btn-tt" onclick="openEdit()">–ò–∑–º–µ–Ω–∏—Ç—å</button>
            <button class="btn-tt btn-tt-icon" onclick="openSettings()"><i class="fas fa-cog"></i></button>
            <button class="btn-tt btn-tt-icon" onclick="openWheel()"><i class="fas fa-gift"></i></button>
        </div>
        <div class="tt-bio" id="myBio"></div>
        <button class="btn btn-outline-light btn-sm rounded-pill px-3" onclick="openFullGifts()"><i class="fas fa-gift text-primary"></i> –ú–æ–∏ –ø–æ–¥–∞—Ä–∫–∏</button>
    </div>
    <div class="tt-tabs">
        <div class="tt-tab active" onclick="switchProfileTab('posts')" id="tab-posts"><i class="fas fa-th"></i></div>
        <div class="tt-tab" onclick="switchProfileTab('likes')" id="tab-likes"><i class="fas fa-heart"></i></div>
        <div class="tt-tab" onclick="switchProfileTab('gifts')" id="tab-gifts"><i class="fas fa-gift"></i></div>
        <div class="tt-tab" onclick="switchProfileTab('archived')" id="tab-archived"><i class="fas fa-lock"></i></div>
    </div>
    <div class="posts-grid" id="myPostsGrid"></div>
</div>

<!-- FOREIGN PROFILE -->
<div id="view-foreign" class="view-section">
    <div id="fProfileThemeLayer" class="profile-theme-layer"></div>
    <div class="app-header" style="position:fixed; width:100%; top:0; z-index:10; background:transparent; border:none; pointer-events:none;">
        <button class="btn btn-dark rounded-circle shadow" style="width:40px;height:40px; pointer-events:auto;" onclick="goBack()"><i class="fas fa-arrow-left"></i></button>
    </div>
    <div class="profile-cover" id="fProfileCover"></div>
    <div class="tt-header">
        <div class="tt-ava-container">
            <img src="" id="fAva" class="tt-ava">
            <!-- –ú–µ—Å—Ç–æ –¥–ª—è –ø–æ–¥–∞—Ä–∫–∞ -->
            <div id="fGiftBadgeContainer"></div>
        </div>
        <div class="tt-name"><span id="fName">...</span></div>
        <div class="tt-username" id="fUsername">@username</div>
        <div class="tt-stats">
            <div class="tt-stat-item"><span class="tt-stat-val" id="fFol">0</span><span class="tt-stat-lbl">–ü–æ–¥–ø–∏—Å–∫–∏</span></div>
            <div class="tt-stat-item"><span class="tt-stat-val" id="fSubs">0</span><span class="tt-stat-lbl">–§–∞–Ω–∞—Ç—ã</span></div>
            <div class="tt-stat-item"><span class="tt-stat-val" id="fLvl">0</span><span class="tt-stat-lbl">–õ–∞–π–∫–∏</span></div>
        </div>
        <div class="tt-actions">
            <button class="btn-tt btn-tt-primary" id="btnFollow" onclick="toggleFollow()">–ü–æ–¥–ø–∏—Å–∞—Ç—å—Å—è</button>
            <button class="btn-tt btn-tt-icon" onclick="openGiftModal()"><i class="fas fa-gift"></i></button>
            <button class="btn-tt btn-tt-icon" onclick="openTransfer()"><i class="fas fa-coins"></i></button>
        </div>
        <div class="tt-bio" id="fBio"></div>
    </div>
    <div class="tt-tabs">
        <div class="tt-tab active" onclick="switchProfileTab('posts')" id="f-tab-posts"><i class="fas fa-th"></i></div>
        <div class="tt-tab" onclick="switchProfileTab('gifts')" id="f-tab-gifts"><i class="fas fa-gift"></i></div>
    </div>
    <div class="posts-grid" id="fPostsGrid"></div>
</div>

<div id="view-discover" class="view-section">
    <div class="p-3">
        <h2 class="fw-bold mb-3">–ò–Ω—Ç–µ—Ä–µ—Å–Ω–æ–µ</h2>
        <h5 class="fw-bold mb-3">–¢–æ–ø –∞–≤—Ç–æ—Ä—ã</h5>
        <div id="recommendedUsers" style="overflow-x:auto; white-space:nowrap; padding-bottom:10px;"></div>
        <h5 class="fw-bold mb-3 mt-4">–ü–æ–ø—É–ª—è—Ä–Ω–æ–µ</h5>
        <div id="popularPosts"></div>
    </div>
</div>

<div class="nav-dock">
    <div class="nav-item active" onclick="nav('feed',this)"><i class="fas fa-home"></i></div>
    <div class="nav-item" onclick="window.location.href='music.html'"><i class="fas fa-music"></i></div>
    <div class="nav-item" onclick="nav('shop',this)"><i class="fas fa-store"></i></div>
    <div class="nav-item" onclick="nav('discover',this)"><i class="fas fa-compass"></i></div>
    <div class="nav-item" onclick="nav('profile',this)"><i class="fas fa-user"></i></div>
</div>

<!-- MODALS -->
<div class="overlay" id="overlay" onclick="closeAll()"></div>

<div class="sheet" id="modalCreate">
    <h4 class="fw-bold mb-3">–ù–æ–≤—ã–π –ø–æ—Å—Ç</h4>
    <textarea id="postTxt" class="inp" rows="3" placeholder="–ß—Ç–æ –Ω–æ–≤–æ–≥–æ?"></textarea>
    <input type="number" id="postPrice" class="inp" placeholder="–¶–µ–Ω–∞ (0 = –±–µ—Å–ø–ª–∞—Ç–Ω–æ)" min="0">
    <div id="postImgPrev" style="display:flex; gap:10px; overflow-x:auto; padding-bottom:10px; display:none;"></div>
    <div class="d-flex justify-content-between align-items-center mt-3">
        <i class="fas fa-image fs-3 text-primary clickable" onclick="document.getElementById('postFile').click()"></i>
        <button class="btn-main w-auto px-4" onclick="publish()">–û–ø—É–±–ª–∏–∫–æ–≤–∞—Ç—å</button>
    </div>
    <input type="file" id="postFile" hidden accept="image/*" multiple onchange="handlePostFile(this)">
</div>

<div class="sheet" id="modalPostOptions">
    <h4 class="fw-bold mb-3">–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–æ—Å—Ç–æ–º</h4>
    <button class="btn btn-dark w-100 mb-2 p-3 text-start rounded-4" onclick="openEditPost()"><i class="fas fa-pen me-3"></i> –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å</button>
    <button class="btn btn-dark w-100 mb-2 p-3 text-start rounded-4" onclick="archivePost()"><i class="fas fa-lock me-3"></i> <span id="archiveBtnText">–í –∞—Ä—Ö–∏–≤</span></button>
    <button class="btn btn-dark w-100 mb-2 p-3 text-start rounded-4 text-danger" onclick="deletePost()"><i class="fas fa-trash me-3"></i> –£–¥–∞–ª–∏—Ç—å</button>
</div>

<div class="sheet" id="modalEditPost">
    <h4 class="fw-bold mb-3">–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ</h4>
    <textarea id="editPostInput" class="inp" rows="4"></textarea>
    <button class="btn-main" onclick="saveEditedPost()">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å</button>
</div>

<div class="sheet" id="modalComments" style="height:80vh; max-height:80vh;">
    <h4 class="fw-bold mb-3 flex-shrink-0">–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏</h4>
    <div id="commentsList" class="comment-container"></div>
    <div class="comment-footer">
        <div id="stickerPicker" class="sticker-picker"></div>
        <div id="commImgPrevCont" class="comm-preview-container position-relative">
             <img id="commImgPrev" class="comm-preview-img">
             <div class="comm-preview-close" onclick="clearCommImg()"><i class="fas fa-times"></i></div>
        </div>
        <div class="d-flex align-items-end gap-2">
            <i class="fas fa-camera comm-attach-btn" onclick="document.getElementById('commFile').click()"></i>
            <i class="far fa-smile comm-attach-btn" onclick="toggleStickerPicker()"></i>
            <input type="file" id="commFile" hidden accept="image/*" onchange="handleCommFile(this)">
            <textarea id="commInput" class="inp m-0 py-2" rows="1" placeholder="–ù–∞–ø–∏—Å–∞—Ç—å..." style="resize:none; max-height:100px"></textarea>
            <button class="btn btn-primary rounded-circle" style="width:46px; height:46px; flex-shrink:0" onclick="sendComment()"><i class="fas fa-arrow-up"></i></button>
        </div>
    </div>
</div>

<div class="sheet" id="modalEditComment">
    <h4 class="fw-bold mb-3" id="editCommTitle">–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å</h4>
    <textarea id="editCommTxt" class="inp" rows="3"></textarea>
    <button id="btnSaveComm" class="btn-main" onclick="saveCommentEdit()">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å</button>
    <button class="btn btn-outline-danger w-100 mt-2 rounded-pill fw-bold" onclick="deleteComment()">–£–¥–∞–ª–∏—Ç—å –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π</button>
</div>

<div class="sheet" id="modalSendGift">
    <h4 class="fw-bold mb-2 text-center">–û—Ç–ø—Ä–∞–≤–∏—Ç—å –ø–æ–¥–∞—Ä–æ–∫</h4>
    <div class="shop-grid gift-grid-3" id="giftListGrid"></div>
</div>

<div class="sheet" id="modalGiftCollection">
    <h4 class="fw-bold mb-3 text-center">–ú–æ—è –∫–æ–ª–ª–µ–∫—Ü–∏—è</h4>
    <div id="fullGiftsGrid" class="shop-grid gift-grid-3"></div>
</div>

<div class="sheet" id="modalEdit">
    <h4 class="fw-bold mb-4 text-center">–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ</h4>
    <div class="text-center mb-4">
        <img src="" id="editAva" style="width:100px; height:100px; border-radius:50%; object-fit:cover; border:3px solid var(--border);">
        <div class="text-primary fw-bold clickable mt-2" onclick="document.getElementById('editFile').click()">–°–º–µ–Ω–∏—Ç—å —Ñ–æ—Ç–æ</div>
        <input type="file" id="editFile" hidden accept="image/*" onchange="handleEditFile(this)">
    </div>
    <label class="small mb-1 ms-2 fw-bold" style="color: #e4e4e7;">–ò–º—è</label>
    <input type="text" id="editName" class="inp" placeholder="–ò–º—è">
    <label class="small mb-1 ms-2 fw-bold" style="color: #e4e4e7;">–Æ–∑–µ—Ä–Ω–µ–π–º (–±–µ–∑ @)</label>
    <input type="text" id="editUsername" class="inp" placeholder="username" maxlength="30">
    <label class="small mb-1 ms-2 fw-bold" style="color: #e4e4e7;">–û —Å–µ–±–µ</label>
    <textarea id="editBio" class="inp" rows="3" placeholder="–û —Å–µ–±–µ"></textarea>
    <button class="btn-main" onclick="saveProfile()">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å</button>
</div>

<div class="sheet" id="modalTransfer">
    <h4 class="fw-bold mb-3">–ü–µ—Ä–µ–≤–æ–¥ –º–æ–Ω–µ—Ç</h4>
    <p class="text-muted small">–ü–æ–ª—É—á–∞—Ç–µ–ª—å: <span id="transDestName" class="fw-bold text-white"></span></p>
    <input type="number" id="transAmount" class="inp" placeholder="–°—É–º–º–∞" min="1">
    <button class="btn-main" onclick="doTransfer()">–û—Ç–ø—Ä–∞–≤–∏—Ç—å</button>
</div>

<div class="sheet" id="modalSettings">
    <h4 class="fw-bold mb-3">–ù–∞—Å—Ç—Ä–æ–π–∫–∏</h4>
    <div class="settings-row">
        <span>–°–∫—Ä—ã—Ç—å –ø–æ—Å—Ç—ã –≤ –ø—Ä–æ—Ñ–∏–ª–µ</span>
        <input class="form-check-input" type="checkbox" id="settHidePosts" onchange="toggleAppSetting('hidePosts')">
    </div>
    <div class="settings-row">
        <span>–ó–∞–∫—Ä—ã—Ç—ã–π –∞–∫–∫–∞—É–Ω—Ç</span>
        <input class="form-check-input" type="checkbox" id="settPrivate" onchange="toggleAppSetting('privateAccount')">
    </div>
    <div class="settings-row mb-3">
        <span>–°–∫—Ä—ã—Ç—å —Å–ø–∏—Å–æ–∫ –ø–æ–¥–∞—Ä–∫–æ–≤</span>
        <input class="form-check-input" type="checkbox" id="settHideGifts" onchange="toggleAppSetting('hideGifts')">
    </div>
    <button class="btn btn-dark w-100 mb-2 p-3 text-start" onclick="openLeaderboard()"><i class="fas fa-trophy text-warning me-2"></i> –¢–æ–ø –ª–∏–¥–µ—Ä–æ–≤</button>
    <button class="btn btn-dark w-100 mb-2 p-3 text-start" onclick="logout()"><i class="fas fa-sign-out-alt text-danger me-2"></i> –í—ã–π—Ç–∏</button>
</div>

<div class="sheet" id="modalLeaderboard">
    <h4 class="fw-bold mb-3 text-center">üèÜ –ë–æ–≥–∞—Ç–µ–π—à–∏–µ</h4>
    <div id="leaderList"></div>
</div>

<div class="sheet" id="modalWheel">
    <h4 class="fw-bold text-center">–ö–æ–ª–µ—Å–æ —É–¥–∞—á–∏</h4>
    <p class="text-center text-muted small">–ö—Ä—É—Ç–∏ —Ä–∞–∑ –≤ 24 —á–∞—Å–∞!</p>
    <div style="width:260px;height:260px;margin:20px auto;position:relative;">
        <div style="position:absolute;top:-10px;left:50%;transform:translateX(-50%);width:0;height:0;border-left:15px solid transparent;border-right:15px solid transparent;border-top:25px solid white;z-index:2;"></div>
        <div id="luckyWheel" style="width:100%;height:100%;border-radius:50%;border:8px solid #222;background:conic-gradient(#ff5252 0 60deg, #448aff 60deg 120deg, #69f0ae 120deg 180deg, #ffd740 180deg 240deg, #e040fb 240deg 300deg, #ffab40 300deg 360deg);transition:transform 4s cubic-bezier(0.1,0.9,0.2,1);"></div>
    </div>
    <button class="btn-main mt-4" id="spinBtn" onclick="spinWheel()">–ò–°–ü–´–¢–ê–¢–¨ –£–î–ê–ß–£</button>
</div>

<div class="sheet" id="modalSearch">
    <h4 class="fw-bold mb-3">–ü–æ–∏—Å–∫</h4>
    <input type="text" id="searchInput" class="inp" placeholder="–í–≤–µ–¥–∏—Ç–µ –∏–º—è..." oninput="doSearch(this.value)">
    <div id="searchResult" class="mt-3"></div>
</div>

<div class="sheet" id="modalNotifs">
    <div class="d-flex justify-content-between mb-3">
        <h4 class="fw-bold">–£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è</h4>
        <div class="text-danger clickable small" onclick="clearNotifs()">–û—á–∏—Å—Ç–∏—Ç—å</div>
    </div>
    <div id="notifList"></div>
</div>

<div class="sheet" id="modalFollowList" style="height:70vh">
    <h4 class="fw-bold mb-3" id="flTitle">–°–ø–∏—Å–æ–∫</h4>
    <div id="flContent" style="padding-bottom:50px"></div>
</div>

<div class="sheet" id="modalPostView">
    <div id="postViewContent"></div>
</div>

<!-- –ù–∞—à —Å–∫—Ä–∏–ø—Ç -->
<script type="module" src="script.js"></script>

</body>
</html>